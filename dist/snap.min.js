var snap;(snap=snap||{}).async=new function(){this.get=function(t){return fetch(t).then(function(n){return n.text().then(function(n){return(new DOMParser).parseFromString(n,"text/xml")}).catch(function(n){console.error("SNAP: Error trying to read respose text",n)})}).catch(function(n){console.error("SNAP: Error trying to fetch URL "+t,n)})}},(snap=snap||{}).links=new function(){this.convertAllToAsync=function(n,t){for(var e=0,r=n.length;e<r;e++)this.convertToAsync(n[e],t)},this.convertToAsync=function(n,e){n.addEventListener("click",function(t){t.preventDefault(),snap.async.get(t.target.href).then(function(n){e(n,t)})})}},(snap=snap||{}).loader=new function(){this.loadContent=function(n,t,e){var r=snap.selectors.findElementsWithTarget(n);if(null==r||0===r.length)t.target.parentNode.replaceChild(n.documentElement,t.target),e(n.documentElement);else for(var o=0,a=r.length;o<a;o++){var s=snap.selectors.findTargets(document,r[o]);this.loadContentOnTargets(r[o],s,e)}},this.loadContentOnTargets=function(n,t,e){for(var r=0,o=t.length;r<o;r++)event.target.parentNode.replaceChild(n.documentElement,event.target),e(n.documentElement),t[r]}},(snap=snap||{}).selectors=new function(){this.DATA_SNAP_TARGET="data-snap-target",this.findForms=function(n){return n.querySelectorAll("form[data-snap]")},this.findLinks=function(n){return n.querySelectorAll("a[data-snap]")},this.findElementsWithTarget=function(n){return n.querySelectorAll("["+this.DATA_SNAP_TARGET+"]")},this.findTargets=function(n,t){var e=this.getTargetValue(t),r=n.querySelectorAll(e);return null==r||0===r.length?(console.error("SNAP: no target found for "+this.DATA_SNAP_TARGET+" = "+e),[]):r},this.getTargetValue=function(n){return n.getAttribute(this.DATA_SNAP_TARGET)}},(snap=snap||{}).onContentLoaded=function(n){var t=snap.selectors.findLinks(n);snap.links.convertAllToAsync(t,snap.onContentReceived)},snap.onContentReceived=function(n,t){snap.loader.load(n,t,snap.onContentLoaded)},document.addEventListener("DOMContentLoaded",snap.onContentLoaded(document.body));